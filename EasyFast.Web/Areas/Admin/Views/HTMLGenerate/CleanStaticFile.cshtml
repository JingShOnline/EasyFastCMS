@using Abp.Web.Mvc.Extensions
@{
    ViewBag.CurrentPageName = "CleanStaticFile";
}
<div class="row margin-buttom-5">
    <div class="col-xs-6">
        <div class="page-head">
            <div class="page-title">
                <h1>
                    <span>清理</span><small>清理是在每天凌晨两点自动进行的,一般来说您不用手动清理</small>
                </h1>
            </div>
        </div>
    </div>
</div>
<div class="row">

    <div class="col-md-5">
        <ul id="tree"></ul>
    </div>
    <div class="col-md-7">
        <div class="m-heading-1 border-green m-bordered">
            <h3>
                <font><font>清理选中栏目下的无用静态页</font></font>
            </h3>
            <p>
                <font><font>如果没有选择栏目那么则是清理所有栏目下的无用静态页</font></font><br>
                <button type="button" class="btn blue" onclick="clean()">
                    <i class="fa fa-check"></i>生成
                </button>
            </p>
        </div>
    </div>
</div>
@Html.IncludeScript("/Areas/Admin/Views/HTMLGenerate/common.js")
<script>
    $(function () {
        initTreeData(true, true, true, true);
    });
    function clean() {
        var nodes = $('#tree').tree('getChecked');

        var arrary = [];
        for (var i = 0; i < nodes.length; i++) {
            arrary.push(nodes[i].id);

        };
        generateService.cleanStaticFile(arrary).done(function () {

            abp.message.success("请理操作成功!!", "操作成功");
        });

    }
</script>